language:
    - c

before_install:
    - pip install --user cpp-coveralls
install:
  - if [ "${TRAVIS_OS_NAME}" = "linux" ]; then
         lsb_release -a
      && sudo apt-add-repository -y ppa:ubuntu-toolchain-r/test
      && sudo apt-add-repository -y ppa:beineri/opt-qt562-trusty
      && sudo apt-get -qq update
      && sudo apt-get -qq install g++-4.8 libc6-i386 qt56tools qt56svg qt56script
      && export CXX="g++-4.8"
      && export CC="gcc-4.8"
      ;
    else
         brew update > /dev/null
      && brew install qt5
      && chmod -R 755 /usr/local/opt/qt5/*
      ;
    fi

script:
    - qmake 
    - make
    - ./tests/tests
addons:
  sonarcloud:
    organization: "khuaigul"
    token: $SONAR_TOKEN

after_success:
    - coveralls --root . -E ".*external.*" -E ".*tests.*"
    - build-wrapper-linux-x86-64 --out-dir bw-output make clean all
    - sonar-scanner

cache:
    directories:
    - '$HOME/.m2/repository'
    - '$HOME/.sonar/cache'

notifications:
    email: false
